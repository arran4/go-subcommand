-- input.json --
{
  "Parent": null,
  "SubCommands": null,
  "SubCommandName": "mycmd",
  "Aliases": null,
  "SubCommandStructName": "MyCmd",
  "SubCommandFunctionName": "MyCmdFunc",
  "SubCommandDescription": "My command description",
  "SubCommandExtendedHelp": "",
  "ImportPath": "example.com/mypkg",
  "SubCommandPackageName": "mypkg",
  "UsageFileName": "mycmd_usage.txt",
  "DefinitionFile": "",
  "DocStart": 0,
  "DocEnd": 0,
  "Parameters": [
    {
      "Name": "verbose",
      "Type": "bool",
      "FlagAliases": [
        "v"
      ],
      "Default": "",
      "Description": "Enable verbose output",
      "IsPositional": false,
      "PositionalArgIndex": 0,
      "IsVarArg": false,
      "VarArgMin": 0,
      "VarArgMax": 0,
      "DeclaredIn": "",
      "IsRequired": false,
      "Parser": {
        "Type": "implicit",
        "Func": null
      },
      "Generator": {
        "Type": "flag",
        "Func": null
      }
    }
  ],
  "ReturnsError": false,
  "ReturnCount": 0,
  "Recursive": false
}
-- template_name --
cmd_test.go.gotmpl
-- output.go --
// Code generated by github.com/arran4/go-subcommand/cmd/gosubc. DO NOT EDIT.

package main

import (
	"flag"
	"testing"
)

func TestMyCmd_Execute(t *testing.T) {

	parent := &RootCmd{
		FlagSet:  flag.NewFlagSet("root", flag.ContinueOnError),
		Commands: make(map[string]func() Cmd),
	}
	cmd := parent.NewMyCmd()

	called := false
	cmd.CommandAction = func(c *MyCmd) error {
		called = true
		return nil
	}

	args := []string{}
	args = append(args, "--verbose")

	err := cmd.Execute(args)
	if err != nil {
		t.Errorf("Unexpected error: %v", err)
	}
	if !called {
		t.Error("CommandAction was not called")
	}

	if cmd.verbose != true {
		t.Errorf("Expected verbose to be true, got '%v'", cmd.verbose)
	}
}
